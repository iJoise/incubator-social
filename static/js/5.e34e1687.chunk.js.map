{"version":3,"sources":["components/Users/Users.module.scss","components/common/Paginator/Paginator.module.scss","components/Users/User/User.module.scss","../node_modules/querystring-es3/index.js","../node_modules/querystring-es3/decode.js","../node_modules/querystring-es3/encode.js","components/common/Paginator/Paginator.tsx","components/Users/User/User.tsx","components/Users/UsersSearchForm.tsx","components/Users/Users.tsx"],"names":["module","exports","decode","parse","require","encode","stringify","hasOwnProperty","obj","prop","Object","prototype","call","qs","sep","eq","options","length","regexp","split","maxKeys","len","i","kstr","vstr","k","v","x","replace","idx","indexOf","substr","decodeURIComponent","isArray","push","Array","xs","toString","stringifyPrimitive","isFinite","name","undefined","map","objectKeys","ks","encodeURIComponent","join","f","res","keys","key","Paginator","React","memo","props","currentPage","onPageChanged","pageSize","totalItemsCount","portionSize","pageCount","Math","ceil","pages","portionCount","useState","portionNumber","setPortionNumber","leftPortionNumber","rightPortionNumber","className","s","paginationContainer","btn","onClick","filter","p","pagination","selected","User","dispatch","useDispatch","followingInProgress","user","user__body","user__img","to","id","src","photos","small","userPhoto","alt","user__item","user__name","user__status","status","followed","disabled","some","unfollow","btn__bl","follow","UsersSearchForm","onFilterChanged","useSelector","state","usersPage","searchUsers","enableReinitialize","initialValues","term","friend","String","onSubmit","values","setSubmitting","isSubmitting","type","find","as","value","Users","totalCount","users","items","isFetching","history","useHistory","useEffect","parsed","queryString","location","search","slice","actualPage","actualFilter","page","requestUsers","query","pathname","usersList","u","Preloader","user_container","pageNumber"],"mappings":"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","file":"static/js/5.e34e1687.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"user_container\":\"Users_user_container__2wk2a\",\"searchUsers\":\"Users_searchUsers__1SRex\",\"find\":\"Users_find__1Z8om\",\"btn\":\"Users_btn__25K-5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"selected\":\"Paginator_selected__2Yrov\",\"paginationContainer\":\"Paginator_paginationContainer__2kR4M\",\"pagination\":\"Paginator_pagination__1tH9L\",\"btn\":\"Paginator_btn__3F0uY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"user\":\"User_user__2XzJZ\",\"user__body\":\"User_user__body__2Pzwy\",\"user__img\":\"User_user__img__1XWvv\",\"user__item\":\"User_user__item___TD3q\",\"user__name\":\"User_user__name__1iML-\",\"user__status\":\"User_user__status__4VYIw\",\"btn\":\"User_btn__1eFAl\",\"btn__bl\":\"User_btn__bl__2acEG\"};","'use strict';\n\nexports.decode = exports.parse = require('./decode');\nexports.encode = exports.stringify = require('./encode');\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n// If obj.hasOwnProperty has been overridden, then calling\n// obj.hasOwnProperty(prop) will break.\n// See: https://github.com/joyent/node/issues/1707\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nmodule.exports = function(qs, sep, eq, options) {\n  sep = sep || '&';\n  eq = eq || '=';\n  var obj = {};\n\n  if (typeof qs !== 'string' || qs.length === 0) {\n    return obj;\n  }\n\n  var regexp = /\\+/g;\n  qs = qs.split(sep);\n\n  var maxKeys = 1000;\n  if (options && typeof options.maxKeys === 'number') {\n    maxKeys = options.maxKeys;\n  }\n\n  var len = qs.length;\n  // maxKeys <= 0 means that we should not limit keys count\n  if (maxKeys > 0 && len > maxKeys) {\n    len = maxKeys;\n  }\n\n  for (var i = 0; i < len; ++i) {\n    var x = qs[i].replace(regexp, '%20'),\n        idx = x.indexOf(eq),\n        kstr, vstr, k, v;\n\n    if (idx >= 0) {\n      kstr = x.substr(0, idx);\n      vstr = x.substr(idx + 1);\n    } else {\n      kstr = x;\n      vstr = '';\n    }\n\n    k = decodeURIComponent(kstr);\n    v = decodeURIComponent(vstr);\n\n    if (!hasOwnProperty(obj, k)) {\n      obj[k] = v;\n    } else if (isArray(obj[k])) {\n      obj[k].push(v);\n    } else {\n      obj[k] = [obj[k], v];\n    }\n  }\n\n  return obj;\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar stringifyPrimitive = function(v) {\n  switch (typeof v) {\n    case 'string':\n      return v;\n\n    case 'boolean':\n      return v ? 'true' : 'false';\n\n    case 'number':\n      return isFinite(v) ? v : '';\n\n    default:\n      return '';\n  }\n};\n\nmodule.exports = function(obj, sep, eq, name) {\n  sep = sep || '&';\n  eq = eq || '=';\n  if (obj === null) {\n    obj = undefined;\n  }\n\n  if (typeof obj === 'object') {\n    return map(objectKeys(obj), function(k) {\n      var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;\n      if (isArray(obj[k])) {\n        return map(obj[k], function(v) {\n          return ks + encodeURIComponent(stringifyPrimitive(v));\n        }).join(sep);\n      } else {\n        return ks + encodeURIComponent(stringifyPrimitive(obj[k]));\n      }\n    }).join(sep);\n\n  }\n\n  if (!name) return '';\n  return encodeURIComponent(stringifyPrimitive(name)) + eq +\n         encodeURIComponent(stringifyPrimitive(obj));\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n\nfunction map (xs, f) {\n  if (xs.map) return xs.map(f);\n  var res = [];\n  for (var i = 0; i < xs.length; i++) {\n    res.push(f(xs[i], i));\n  }\n  return res;\n}\n\nvar objectKeys = Object.keys || function (obj) {\n  var res = [];\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) res.push(key);\n  }\n  return res;\n};\n","import React, {useState} from \"react\";\nimport s from \"./Paginator.module.scss\";\n\ntype PaginatorPropsType = {\n   totalItemsCount: number\n   pageSize: number\n   currentPage: number\n   onPageChanged: (pageNumber: number) => void\n   portionSize?: number\n}\n\n\nexport const Paginator: React.FC<PaginatorPropsType> = React.memo((props) => {\n\n   const {currentPage, onPageChanged, pageSize, totalItemsCount, portionSize = 10} = props;\n\n   const pageCount = Math.ceil(totalItemsCount / pageSize);\n   const pages = [];\n   for (let i = 1; i <= pageCount; i++) {\n      pages.push(i);\n   }\n\n   const portionCount = Math.ceil(pageCount / portionSize);\n   const [portionNumber, setPortionNumber] = useState(1);\n   const leftPortionNumber = (portionNumber - 1) * portionSize + 1;\n   const rightPortionNumber = portionNumber * portionSize;\n\n\n   return (\n      <div className={s.paginationContainer}>\n         {\n            portionNumber > 1 &&\n            <button className={s.btn} onClick={() => setPortionNumber(portionNumber - 1)}>Pref</button>\n         }\n         {\n            pages\n               .filter(p => p >= leftPortionNumber && p <= rightPortionNumber)\n               .map(p => {\n               return <div key={p}\n                           className={currentPage === p ? `${s.pagination} ${s.selected}` : s.pagination}\n                           onClick={() => {\n                              onPageChanged(p)\n                           }}\n               >{p}</div>\n            })\n         }\n         {portionCount > portionNumber &&\n         <button className={s.btn} onClick={() => setPortionNumber(portionNumber + 1)} >Next</button>}\n      </div>\n   )\n});\n","import React from \"react\";\nimport s from \"./User.module.scss\";\nimport userPhoto from \"../../../assets/images/user.png\";\nimport {NavLink} from \"react-router-dom\";\nimport {follow, unfollow, UsersType} from \"../../../redux/users-reducer\";\nimport {useDispatch} from \"react-redux\";\n\ntype UserPropsType = {\n   user: UsersType\n   followingInProgress: number[]\n}\n\n\nexport const User: React.FC<UserPropsType> = React.memo((props) => {\n\n   const dispatch = useDispatch()\n\n   const {\n      followingInProgress,\n      user\n   } = props;\n\n   return (\n      <div className={s.user}>\n         <div key={user.id} className={s.user__body}>\n            <div className={s.user__img}>\n               <NavLink to={'/profile/' + user.id}>\n                  <img src={user.photos.small || userPhoto} alt={'avatar'}/>\n               </NavLink>\n            </div>\n            <div className={s.user__item}>\n               <div>\n                  <div className={s.user__name}>{user.name}</div>\n                  <div className={s.user__status}>{user.status}</div>\n               </div>\n               <div>\n                  {user.followed\n                     ? <button className={s.btn}\n                               disabled={followingInProgress.some(id => id === user.id)}\n                               onClick={() => {\n                                  dispatch(unfollow(user.id))\n                               }\n                               }>Unfollow</button>\n                     : <button className={`${s.btn} ${s.btn__bl}`}\n                               disabled={followingInProgress.some(id => id === user.id)}\n                               onClick={() => {\n                                  dispatch(follow(user.id))\n                               }\n                               }>Follow</button>\n                  }\n               </div>\n            </div>\n         </div>\n      </div>\n   )\n})\n","import React from \"react\";\nimport s from \"./Users.module.scss\";\nimport {Field, Form, Formik} from \"formik\";\nimport {FilterType} from \"../../redux/users-reducer\";\nimport {useSelector} from \"react-redux\";\nimport {AppStateType} from \"../../redux/redux-store\";\n\n\n\ntype UsersSearchFormPropsType = {\n   onFilterChanged: (filter: FilterType) => void\n}\n\ntype FormType = {\n   term: string\n   friend: FriendFormType\n}\ntype FriendFormType = 'null' | 'true' | 'false'\n\n\nexport const UsersSearchForm: React.FC<UsersSearchFormPropsType> = (props) => {\n   const {onFilterChanged} = props;\n\n   const filter = useSelector<AppStateType, FilterType>(state => state.usersPage.filter);\n\n   const submit = (values: FormType, {setSubmitting}: { setSubmitting: (isSubmitting: boolean) => void }) => {\n      const filter: FilterType = {\n         term: values.term,\n         friend: values.friend === 'null' ? null : values.friend === 'true'\n      }\n      onFilterChanged(filter);\n      setSubmitting(false);\n   };\n\n   return <>\n      <div className={s.searchUsers}>\n         <Formik\n            enableReinitialize\n            initialValues={{term: filter.term, friend: String(filter.friend) as FriendFormType}}\n            onSubmit={submit}\n         >\n            {({isSubmitting}) => (\n               <Form>\n                  <Field type=\"text\" name=\"term\" className={s.find}/>\n                  <Field name=\"friend\" as=\"select\">\n                     <option value=\"null\">All</option>\n                     <option value=\"true\">Only followed</option>\n                     <option value=\"false\">Only Unfollowed</option>\n                  </Field>\n                  <button type=\"submit\" disabled={isSubmitting} className={s.btn}>\n                     Find\n                  </button>\n               </Form>\n            )}\n         </Formik>\n      </div>\n   </>\n}","import React, {useEffect} from \"react\";\nimport s from \"./Users.module.scss\";\nimport {FilterType, requestUsers, UsersPageType} from \"../../redux/users-reducer\";\nimport {Paginator} from \"../common/Paginator/Paginator\";\nimport {User} from \"./User/User\";\nimport {UsersSearchForm} from \"./UsersSearchForm\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {AppStateType} from \"../../redux/redux-store\";\nimport {Preloader} from \"../common/preloader/Preloader\";\nimport {useHistory} from \"react-router-dom\";\nimport * as queryString from \"querystring\";\n\ntype ParsedUrlType = {\n   term: string\n   page: string\n   friend: string\n}\n\nconst Users: React.FC = React.memo(() => {\n\n   const {\n      currentPage,\n      pageSize,\n      followingInProgress,\n      totalCount,\n      items: users,\n      filter,\n      isFetching\n   } = useSelector<AppStateType, UsersPageType>(state => state.usersPage);\n\n   const dispatch = useDispatch();\n   const history = useHistory()\n\n   const onPageChanged = (pageNumber: number) => {\n      dispatch(requestUsers(pageNumber, pageSize, filter));\n   }\n\n   const onFilterChanged = (filter: FilterType) => {\n      dispatch(requestUsers(1, pageSize, filter));\n   }\n\n   useEffect(() => {\n      const parsed = queryString.parse(history.location.search.slice(1)) as ParsedUrlType;\n\n      let actualPage = currentPage;\n      let actualFilter = filter\n\n      if (!!parsed.page) actualPage = +parsed.page;\n      if (!!parsed.term) actualFilter = {...actualFilter, term: parsed.term}\n      switch (parsed.friend) {\n         case 'null':\n            actualFilter = {...actualFilter, friend: null};\n            break;\n         case 'true':\n            actualFilter = {...actualFilter, friend: true};\n            break;\n         case 'false':\n            actualFilter = {...actualFilter, friend: false};\n            break;\n      }\n      dispatch(requestUsers(actualPage, pageSize, actualFilter));\n// eslint-disable-next-line react-hooks/exhaustive-deps\n   }, [])\n\n   useEffect(() => {\n      const query = {} as ParsedUrlType\n      if (!!filter.term) query.term = filter.term\n      if (!!filter.friend) query.friend = String(filter.friend)\n      if (currentPage !== 1) query.page = String(currentPage)\n      history.push({\n         pathname: '/users',\n         search: queryString.stringify(query)\n      })\n   }, [filter, currentPage, history]);\n\n   const usersList = users.map(u =>\n      <User user={u} followingInProgress={followingInProgress} key={u.id}/>\n   )\n\n   return (\n      <>\n         {isFetching && <Preloader/>}\n         <div className={s.user_container}>\n            <UsersSearchForm onFilterChanged={onFilterChanged}/>\n            <Paginator\n               totalItemsCount={totalCount}\n               pageSize={pageSize}\n               currentPage={currentPage}\n               onPageChanged={onPageChanged}\n            />\n\n            {usersList}\n\n         </div>\n      </>\n   )\n})\n\nexport default Users;"],"sourceRoot":""}