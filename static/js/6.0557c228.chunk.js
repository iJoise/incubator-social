(this["webpackJsonpsocial-kama"]=this["webpackJsonpsocial-kama"]||[]).push([[6],{298:function(e,a,t){"use strict";t.d(a,"a",(function(){return c}));var s=t(98);function c(e,a){return function(e){if(Array.isArray(e))return e}(e)||function(e,a){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var t=[],s=!0,c=!1,n=void 0;try{for(var i,r=e[Symbol.iterator]();!(s=(i=r.next()).done)&&(t.push(i.value),!a||t.length!==a);s=!0);}catch(o){c=!0,n=o}finally{try{s||null==r.return||r.return()}finally{if(c)throw n}}return t}}(e,a)||Object(s.a)(e,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},299:function(e,a,t){e.exports={dialogs:"Dialogs_dialogs__2Gkkf",dialogItem:"Dialogs_dialogItem__2Vaf7",dialogHeader:"Dialogs_dialogHeader__gZy7z",dialogBody:"Dialogs_dialogBody__1O5Nh",messages:"Dialogs_messages__1J3nn",messageHeader:"Dialogs_messageHeader__cyzRW",messagesBody:"Dialogs_messagesBody__7bGZw",messageBottom:"Dialogs_messageBottom__2Zy_K",btn:"Dialogs_btn__3xYgq",btnSend:"Dialogs_btnSend__131Me",btnDisabled:"Dialogs_btnDisabled__2b8yX"}},300:function(e,a,t){"use strict";t.d(a,"a",(function(){return l}));var s=t(3),c=t(54),n=(t(0),t(12)),i=t(23),r=t(1),o=function(e){return{isAuth:e.auth.isAuth}};function l(e){return Object(i.b)(o)((function(a){var t=a.isAuth,i=Object(c.a)(a,["isAuth"]);return t?Object(r.jsx)(e,Object(s.a)({},i)):Object(r.jsx)(n.a,{to:"/login"})}))}},307:function(e,a,t){e.exports={dialog:"DialogItem_dialog__XEMO5",activeDialog:"DialogItem_activeDialog__2UVq-"}},308:function(e,a,t){e.exports={chat:"Message_chat__Bjvcd",chat__userAvatar:"Message_chat__userAvatar__UT-WP",message:"Message_message__3nerD"}},324:function(e,a,t){"use strict";t.r(a);var s=t(23),c=t(0),n=t.n(c),i=t(299),r=t.n(i),o=t(307),l=t.n(o),d=t(19),u=t(1),j=n.a.memo((function(e){var a=e.id,t=e.avatar,s=e.name,c="/dialogs/".concat(a);return Object(u.jsx)("div",{className:l.a.dialog,children:Object(u.jsxs)(d.b,{to:c,activeClassName:l.a.activeDialog,children:[Object(u.jsx)("img",{src:t,alt:"avatar"}),s]})})})),b=n.a.memo((function(e){var a=e.dialogs.map((function(e){return Object(u.jsx)(j,{name:e.name,id:e.id,avatar:e.avatar},e.id)}));return Object(u.jsxs)("div",{className:r.a.dialogItem,children:[Object(u.jsx)("div",{className:r.a.dialogHeader,children:"Dialogs:"}),Object(u.jsx)("div",{className:r.a.dialogBody,children:a})]})})),g=t(298),m=t(308),f=t.n(m),O=t(97),h=n.a.memo((function(e){var a=e.chatItem,t=a.message,s=a.photo,c=a.userName;return Object(u.jsxs)("div",{className:f.a.chat,children:[Object(u.jsx)("div",{className:f.a.chat__userAvatar,children:Object(u.jsx)("img",{src:s||O.a,alt:"avatar"})}),Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{style:{color:"#304159",paddingLeft:"10px"},children:c}),Object(u.jsx)("div",{className:f.a.message,children:t})]})]})})),_=n.a.memo((function(){var e=Object(s.d)((function(e){return e.chat.messages})),a=Object(c.useState)(!0),t=Object(g.a)(a,2),n=t[0],i=t[1],o=e.map((function(e){return Object(u.jsx)(h,{chatItem:e},e.id)})),l=Object(c.useRef)(null),d=Object(c.useRef)(null);return Object(c.useEffect)((function(){var e;n&&(null===(e=d.current)||void 0===e||e.scrollIntoView({behavior:"smooth"}))}),[e,n]),Object(u.jsxs)("div",{className:r.a.messages,children:[Object(u.jsxs)("div",{className:r.a.messageHeader,children:[Object(u.jsx)("i",{className:"fa fa-search"}),Object(u.jsx)("input",{type:"search",placeholder:"Search message...",name:"form"}),Object(u.jsx)("i",{className:"fa fa-sliders"})]}),Object(u.jsxs)("div",{className:r.a.messagesBody,ref:l,onScroll:function(e){var a=e.currentTarget;Math.abs(a.scrollHeight-a.scrollTop-a.clientHeight)<300?!n&&i(!0):n&&i(!1)},children:[o,Object(u.jsx)("div",{ref:d})]})]})})),v=t(100),x=t(22),y=function(){var e=Object(s.d)((function(e){return e.chat.status})),a=Object(c.useState)(""),t=Object(g.a)(a,2),n=t[0],i=t[1],o=Object(s.c)(),l=function(){console.log("click"),""!==n.trim()&&(o(Object(v.b)(n)),i(""))},d="fa fa-paper-plane ".concat(e===x.b.Ready?r.a.btnSend:r.a.btnDisabled);return Object(u.jsxs)("div",{className:r.a.messageBottom,children:[Object(u.jsx)("textarea",{onChange:function(e){i(e.currentTarget.value)},className:r.a.messageText,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435...",value:n,onKeyPress:function(e){"Enter"===e.key&&(e.preventDefault(),l())}}),Object(u.jsxs)("div",{className:r.a.btn,children:[Object(u.jsx)("button",{disabled:e!==x.b.Ready,onClick:l,children:Object(u.jsx)("i",{className:d})}),Object(u.jsx)("i",{className:"fa fa-microphone"})]})]})},p=function(e){var a=e.sendMessage,t=Object(s.c)();return Object(c.useEffect)((function(){return t(Object(v.c)()),function(){t(Object(v.d)())}}),[t]),Object(u.jsxs)("div",{children:[Object(u.jsx)(_,{sendMessage:a}),Object(u.jsx)(y,{})]})},D=n.a.memo((function(e){var a=e.dialogs,t=e.sendMessage;return Object(u.jsxs)("div",{className:r.a.dialogs,children:[Object(u.jsx)(b,{dialogs:a}),Object(u.jsx)(p,{sendMessage:t})]})})),N=t(103),M=t(300),S=t(11),B=Object(S.d)(Object(s.b)((function(e){return{dialogs:e.dialogPage.dialogs}}),{sendMessage:N.a}),M.a)(D);a.default=B}}]);
//# sourceMappingURL=6.0557c228.chunk.js.map